// Code generated by re2c 2.2 on Fri Dec 17 18:40:14 2021, DO NOT EDIT.
package lexer

import "bytes"
import "github.com/masp/hoser/token"

func (s *Scanner) lex() (pos token.Pos, tok token.Token, lit string, err error) {
	for {
		lit = ""
		pos = s.pos()
		s.token = s.cursor

		{
			var yych byte
			yyaccept := 0
			yych = s.text[s.cursor]
			if yych <= '/' {
				if yych <= '!' {
					if yych <= '\n' {
						if yych <= 0x00 {
							goto yy2
						}
						if yych <= 0x08 {
							goto yy4
						}
						if yych <= '\t' {
							goto yy6
						}
						goto yy9
					} else {
						if yych <= '\r' {
							if yych <= '\f' {
								goto yy4
							}
							goto yy11
						} else {
							if yych == ' ' {
								goto yy6
							}
							goto yy4
						}
					}
				} else {
					if yych <= ')' {
						if yych <= '#' {
							if yych <= '"' {
								goto yy12
							}
							goto yy14
						} else {
							if yych <= '\'' {
								goto yy4
							}
							if yych <= '(' {
								goto yy17
							}
							goto yy19
						}
					} else {
						if yych <= ',' {
							if yych <= '+' {
								goto yy4
							}
							goto yy21
						} else {
							if yych == '.' {
								goto yy23
							}
							goto yy4
						}
					}
				}
			} else {
				if yych <= '_' {
					if yych <= '<' {
						if yych <= '9' {
							if yych <= '0' {
								goto yy25
							}
							goto yy26
						} else {
							if yych <= ':' {
								goto yy29
							}
							if yych <= ';' {
								goto yy31
							}
							goto yy4
						}
					} else {
						if yych <= '@' {
							if yych <= '=' {
								goto yy33
							}
							goto yy4
						} else {
							if yych <= 'Z' {
								goto yy35
							}
							if yych <= '^' {
								goto yy4
							}
							goto yy35
						}
					}
				} else {
					if yych <= 'r' {
						if yych <= 'l' {
							if yych <= '`' {
								goto yy4
							}
							goto yy35
						} else {
							if yych <= 'm' {
								goto yy38
							}
							if yych <= 'q' {
								goto yy35
							}
							goto yy39
						}
					} else {
						if yych <= '{' {
							if yych <= 'z' {
								goto yy35
							}
							goto yy40
						} else {
							if yych == '}' {
								goto yy42
							}
							goto yy4
						}
					}
				}
			}
		yy2:
			s.cursor += 1
			{
				tok = token.Eof
				return
			}
		yy4:
			s.cursor += 1
		yy5:
			{
				err = ErrBadToken
				return
			}
		yy6:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == '\t' {
				goto yy6
			}
			if yych == ' ' {
				goto yy6
			}
			{
				continue
			}
		yy9:
			s.cursor += 1
			{
				if s.insertSemi() {
					s.cursor = s.token // Has the effect of "inserting" the semicolon in the input
					tok = token.Semicolon
					lit = "\n"
					return
				} else {
					s.file.AddLine(s.token)
					continue
				}
			}
		yy11:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == '\n' {
				goto yy9
			}
			goto yy5
		yy12:
			s.cursor += 1
			{
				return s.lexString('"')
			}
		yy14:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych <= '\n' {
				if yych <= 0x00 {
					goto yy16
				}
				if yych <= '\t' {
					goto yy14
				}
			} else {
				if yych != '\r' {
					goto yy14
				}
			}
		yy16:
			{
				tok = token.Comment
				lit = s.literal()
				return
			}
		yy17:
			s.cursor += 1
			{
				tok = token.LParen
				lit = "("
				return
			}
		yy19:
			s.cursor += 1
			{
				tok = token.RParen
				lit = ")"
				return
			}
		yy21:
			s.cursor += 1
			{
				tok = token.Comma
				lit = ","
				return
			}
		yy23:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych <= '/' {
				goto yy24
			}
			if yych <= '9' {
				goto yy44
			}
		yy24:
			{
				tok = token.Period
				lit = "."
				return
			}
		yy25:
			yyaccept = 0
			s.cursor += 1
			s.marker = s.cursor
			yych = s.text[s.cursor]
			if yych <= '9' {
				if yych == '.' {
					goto yy44
				}
				if yych <= '/' {
					goto yy5
				}
				goto yy47
			} else {
				if yych <= 'E' {
					if yych <= 'D' {
						goto yy5
					}
					goto yy50
				} else {
					if yych == 'e' {
						goto yy50
					}
					goto yy5
				}
			}
		yy26:
			yyaccept = 1
			s.cursor += 1
			s.marker = s.cursor
			yych = s.text[s.cursor]
			if yych <= '9' {
				if yych == '.' {
					goto yy44
				}
				if yych >= '0' {
					goto yy26
				}
			} else {
				if yych <= 'E' {
					if yych >= 'E' {
						goto yy50
					}
				} else {
					if yych == 'e' {
						goto yy50
					}
				}
			}
		yy28:
			{
				tok = token.Integer
				lit = s.literal()
				return
			}
		yy29:
			s.cursor += 1
			{
				tok = token.Colon
				lit = ":"
				return
			}
		yy31:
			s.cursor += 1
			{
				tok = token.Semicolon
				lit = ";"
				return
			}
		yy33:
			s.cursor += 1
			{
				tok = token.Equals
				lit = "="
				return
			}
		yy35:
			s.cursor += 1
			yych = s.text[s.cursor]
		yy36:
			if yych <= 'Z' {
				if yych <= '/' {
					goto yy37
				}
				if yych <= '9' {
					goto yy35
				}
				if yych >= 'A' {
					goto yy35
				}
			} else {
				if yych <= '_' {
					if yych >= '_' {
						goto yy35
					}
				} else {
					if yych <= '`' {
						goto yy37
					}
					if yych <= 'z' {
						goto yy35
					}
				}
			}
		yy37:
			{
				tok = token.Ident
				lit = s.literal()
				return
			}
		yy38:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 'o' {
				goto yy51
			}
			goto yy36
		yy39:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 'e' {
				goto yy52
			}
			goto yy36
		yy40:
			s.cursor += 1
			{
				tok = token.LCurlyBrack
				lit = "{"
				return
			}
		yy42:
			s.cursor += 1
			{
				tok = token.RCurlyBrack
				lit = "}"
				return
			}
		yy44:
			yyaccept = 2
			s.cursor += 1
			s.marker = s.cursor
			yych = s.text[s.cursor]
			if yych <= 'D' {
				if yych <= '/' {
					goto yy46
				}
				if yych <= '9' {
					goto yy44
				}
			} else {
				if yych <= 'E' {
					goto yy50
				}
				if yych == 'e' {
					goto yy50
				}
			}
		yy46:
			{
				tok = token.Float
				lit = s.literal()
				return
			}
		yy47:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych <= '9' {
				if yych == '.' {
					goto yy44
				}
				if yych >= '0' {
					goto yy47
				}
			} else {
				if yych <= 'E' {
					if yych >= 'E' {
						goto yy50
					}
				} else {
					if yych == 'e' {
						goto yy50
					}
				}
			}
		yy49:
			s.cursor = s.marker
			if yyaccept <= 1 {
				if yyaccept == 0 {
					goto yy5
				} else {
					goto yy28
				}
			} else {
				goto yy46
			}
		yy50:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych <= ',' {
				if yych == '+' {
					goto yy53
				}
				goto yy49
			} else {
				if yych <= '-' {
					goto yy53
				}
				if yych <= '/' {
					goto yy49
				}
				if yych <= '9' {
					goto yy54
				}
				goto yy49
			}
		yy51:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 'd' {
				goto yy56
			}
			goto yy36
		yy52:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 't' {
				goto yy57
			}
			goto yy36
		yy53:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych <= '/' {
				goto yy49
			}
			if yych >= ':' {
				goto yy49
			}
		yy54:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych <= '/' {
				goto yy46
			}
			if yych <= '9' {
				goto yy54
			}
			goto yy46
		yy56:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 'u' {
				goto yy58
			}
			goto yy36
		yy57:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 'u' {
				goto yy59
			}
			goto yy36
		yy58:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 'l' {
				goto yy60
			}
			goto yy36
		yy59:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 'r' {
				goto yy61
			}
			goto yy36
		yy60:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 'e' {
				goto yy62
			}
			goto yy36
		yy61:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych == 'n' {
				goto yy64
			}
			goto yy36
		yy62:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych <= 'Z' {
				if yych <= '/' {
					goto yy63
				}
				if yych <= '9' {
					goto yy35
				}
				if yych >= 'A' {
					goto yy35
				}
			} else {
				if yych <= '_' {
					if yych >= '_' {
						goto yy35
					}
				} else {
					if yych <= '`' {
						goto yy63
					}
					if yych <= 'z' {
						goto yy35
					}
				}
			}
		yy63:
			{
				tok = token.Module
				lit = "module"
				return
			}
		yy64:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych <= 'Z' {
				if yych <= '/' {
					goto yy65
				}
				if yych <= '9' {
					goto yy35
				}
				if yych >= 'A' {
					goto yy35
				}
			} else {
				if yych <= '_' {
					if yych >= '_' {
						goto yy35
					}
				} else {
					if yych <= '`' {
						goto yy65
					}
					if yych <= 'z' {
						goto yy35
					}
				}
			}
		yy65:
			{
				tok = token.Return
				lit = "return"
				return
			}
		}

	}
}

func (s *Scanner) lexString(quote byte) (pos token.Pos, tok token.Token, lit string, err error) {
	var buf bytes.Buffer
	for {
		var u byte

		{
			var yych byte
			yych = s.text[s.cursor]
			if yych == '\n' {
				goto yy70
			}
			if yych == '\\' {
				goto yy72
			}
			s.cursor += 1
			{
				u = yych
				if u == quote {
					tok = token.String
					pos = token.Pos(s.token)
					lit = string(buf.Bytes())
					return
				}
				buf.WriteByte(u)
				continue
			}
		yy70:
			s.cursor += 1
		yy71:
			{
				err = ErrInvalidString
				return
			}
		yy72:
			s.cursor += 1
			yych = s.text[s.cursor]
			if yych <= 'b' {
				if yych <= '>' {
					if yych <= '"' {
						if yych <= '!' {
							goto yy71
						}
					} else {
						if yych == '\'' {
							goto yy75
						}
						goto yy71
					}
				} else {
					if yych <= '\\' {
						if yych <= '?' {
							goto yy77
						}
						if yych <= '[' {
							goto yy71
						}
						goto yy79
					} else {
						if yych <= '`' {
							goto yy71
						}
						if yych <= 'a' {
							goto yy81
						}
						goto yy83
					}
				}
			} else {
				if yych <= 'q' {
					if yych <= 'f' {
						if yych <= 'e' {
							goto yy71
						}
						goto yy85
					} else {
						if yych == 'n' {
							goto yy87
						}
						goto yy71
					}
				} else {
					if yych <= 't' {
						if yych <= 'r' {
							goto yy89
						}
						if yych <= 's' {
							goto yy71
						}
						goto yy91
					} else {
						if yych == 'v' {
							goto yy93
						}
						goto yy71
					}
				}
			}
			s.cursor += 1
			{
				buf.WriteByte('"')
				continue
			}
		yy75:
			s.cursor += 1
			{
				buf.WriteByte('\'')
				continue
			}
		yy77:
			s.cursor += 1
			{
				buf.WriteByte('?')
				continue
			}
		yy79:
			s.cursor += 1
			{
				buf.WriteByte('\\')
				continue
			}
		yy81:
			s.cursor += 1
			{
				buf.WriteByte('\a')
				continue
			}
		yy83:
			s.cursor += 1
			{
				buf.WriteByte('\b')
				continue
			}
		yy85:
			s.cursor += 1
			{
				buf.WriteByte('\f')
				continue
			}
		yy87:
			s.cursor += 1
			{
				buf.WriteByte('\n')
				continue
			}
		yy89:
			s.cursor += 1
			{
				buf.WriteByte('\r')
				continue
			}
		yy91:
			s.cursor += 1
			{
				buf.WriteByte('\t')
				continue
			}
		yy93:
			s.cursor += 1
			{
				buf.WriteByte('\v')
				continue
			}
		}

	}
}
